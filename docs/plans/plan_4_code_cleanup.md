# Plan 4: Code Cleanup

ðŸŸ¢ **Priority: LOW** â€” Technical debt and polish items.

---

## Cleanup 1: Remove Duplicate `switchRole()`

**Problem**: [users.ts](file:///Users/tymonjezionek/Desktop/seaclouds%20timesheet/my-app/app/data/actions/users.ts) has both `updateUserRole()` (line 68) and `switchRole()` (line 94) â€” identical logic, the latter marked "Deprecated or legacy?".

### Change
- Delete `switchRole()` entirely
- Search codebase for any imports of `switchRole` and replace with `updateUserRole`

---

## Cleanup 2: Update Boilerplate Metadata

**Problem**: [layout.tsx](file:///Users/tymonjezionek/Desktop/seaclouds%20timesheet/my-app/app/layout.tsx) still has default Create Next App title.

### Change
```diff
 export const metadata: Metadata = {
-  title: "Create Next App",
-  description: "Generated by create next app",
+  title: "Seaclouds Timesheet",
+  description: "System zarzÄ…dzania czasem pracy â€” Seaclouds",
 };
```

---

## Cleanup 3: Consistent Error Handling

**Problem**: Server actions log errors to `console.error` but don't always return user-friendly error messages.

### Change
- Audit all server actions in `app/data/actions/`
- Ensure every action returns `{ error: string }` or `{ success: true }` consistently
- Add toast notifications (using existing `sonner` dependency) on the client side for action results

---

## Cleanup 4: Remove `console.error` Calls

**Problem**: Multiple `console.error` calls remain in production code.

### Change
- Replace with proper error returns or remove where the error is already returned to the caller
- Keep only in truly unexpected cases

---

## Verification Plan

### Manual Verification
1. `grep -r "switchRole" app/` should return 0 results after cleanup
2. Browser tab title should show "Seaclouds Timesheet"
3. Trigger an error scenario (e.g. save invalid hours) â†’ should show a toast notification, not just a console log
